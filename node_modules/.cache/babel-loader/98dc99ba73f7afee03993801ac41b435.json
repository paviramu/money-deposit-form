{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cloneWindow = exports.DocumentCloner = undefined;\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _Bounds = require('./Bounds');\n\nvar _Proxy = require('./Proxy');\n\nvar _ResourceLoader = require('./ResourceLoader');\n\nvar _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);\n\nvar _Util = require('./Util');\n\nvar _background = require('./parsing/background');\n\nvar _CanvasRenderer = require('./renderer/CanvasRenderer');\n\nvar _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);\n\nvar _PseudoNodeContent = require('./PseudoNodeContent');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\n\nvar DocumentCloner = exports.DocumentCloner = function () {\n  function DocumentCloner(element, options, logger, copyInline, renderer) {\n    _classCallCheck(this, DocumentCloner);\n\n    this.referenceElement = element;\n    this.scrolledElements = [];\n    this.copyStyles = copyInline;\n    this.inlineImages = copyInline;\n    this.logger = logger;\n    this.options = options;\n    this.renderer = renderer;\n    this.resourceLoader = new _ResourceLoader2.default(options, logger, window);\n    this.pseudoContentData = {\n      counters: {},\n      quoteDepth: 0\n    }; // $FlowFixMe\n\n    this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\n  }\n\n  _createClass(DocumentCloner, [{\n    key: 'inlineAllImages',\n    value: function inlineAllImages(node) {\n      var _this = this;\n\n      if (this.inlineImages && node) {\n        var style = node.style;\n        Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {\n          if (backgroundImage.method === 'url') {\n            return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {\n              return img && typeof img.src === 'string' ? 'url(\"' + img.src + '\")' : 'none';\n            }).catch(function (e) {\n              if (process.env.NODE_ENV !== 'production') {\n                _this.logger.log('Unable to load image', e);\n              }\n            });\n          }\n\n          return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');\n        })).then(function (backgroundImages) {\n          if (backgroundImages.length > 1) {\n            // TODO Multiple backgrounds somehow broken in Chrome\n            style.backgroundColor = '';\n          }\n\n          style.backgroundImage = backgroundImages.join(',');\n        });\n\n        if (node instanceof HTMLImageElement) {\n          this.resourceLoader.inlineImage(node.src).then(function (img) {\n            if (img && node instanceof HTMLImageElement && node.parentNode) {\n              var parentNode = node.parentNode;\n              var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));\n              parentNode.replaceChild(clonedChild, node);\n            }\n          }).catch(function (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              _this.logger.log('Unable to load image', e);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: 'inlineFonts',\n    value: function inlineFonts(document) {\n      var _this2 = this;\n\n      return Promise.all(Array.from(document.styleSheets).map(function (sheet) {\n        if (sheet.href) {\n          return fetch(sheet.href).then(function (res) {\n            return res.text();\n          }).then(function (text) {\n            return createStyleSheetFontsFromText(text, sheet.href);\n          }).catch(function (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              _this2.logger.log('Unable to load stylesheet', e);\n            }\n\n            return [];\n          });\n        }\n\n        return getSheetFonts(sheet, document);\n      })).then(function (fonts) {\n        return fonts.reduce(function (acc, font) {\n          return acc.concat(font);\n        }, []);\n      }).then(function (fonts) {\n        return Promise.all(fonts.map(function (font) {\n          return fetch(font.formats[0].src).then(function (response) {\n            return response.blob();\n          }).then(function (blob) {\n            return new Promise(function (resolve, reject) {\n              var reader = new FileReader();\n              reader.onerror = reject;\n\n              reader.onload = function () {\n                // $FlowFixMe\n                var result = reader.result;\n                resolve(result);\n              };\n\n              reader.readAsDataURL(blob);\n            });\n          }).then(function (dataUri) {\n            font.fontFace.setProperty('src', 'url(\"' + dataUri + '\")');\n            return '@font-face {' + font.fontFace.cssText + ' ';\n          });\n        }));\n      }).then(function (fontCss) {\n        var style = document.createElement('style');\n        style.textContent = fontCss.join('\\n');\n\n        _this2.documentElement.appendChild(style);\n      });\n    }\n  }, {\n    key: 'createElementClone',\n    value: function createElementClone(node) {\n      var _this3 = this;\n\n      if (this.copyStyles && node instanceof HTMLCanvasElement) {\n        var img = node.ownerDocument.createElement('img');\n\n        try {\n          img.src = node.toDataURL();\n          return img;\n        } catch (e) {\n          if (process.env.NODE_ENV !== 'production') {\n            this.logger.log('Unable to clone canvas contents, canvas is tainted');\n          }\n        }\n      }\n\n      if (node instanceof HTMLIFrameElement) {\n        var tempIframe = node.cloneNode(false);\n        var iframeKey = generateIframeKey();\n        tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\n\n        var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),\n            width = _parseBounds.width,\n            height = _parseBounds.height;\n\n        this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {\n          return _this3.renderer(documentElement, {\n            async: _this3.options.async,\n            allowTaint: _this3.options.allowTaint,\n            backgroundColor: '#ffffff',\n            canvas: null,\n            imageTimeout: _this3.options.imageTimeout,\n            logging: _this3.options.logging,\n            proxy: _this3.options.proxy,\n            removeContainer: _this3.options.removeContainer,\n            scale: _this3.options.scale,\n            foreignObjectRendering: _this3.options.foreignObjectRendering,\n            useCORS: _this3.options.useCORS,\n            target: new _CanvasRenderer2.default(),\n            width: width,\n            height: height,\n            x: 0,\n            y: 0,\n            windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\n            windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\n            scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\n            scrollY: documentElement.ownerDocument.defaultView.pageYOffset\n          }, _this3.logger.child(iframeKey));\n        }).then(function (canvas) {\n          return new Promise(function (resolve, reject) {\n            var iframeCanvas = document.createElement('img');\n\n            iframeCanvas.onload = function () {\n              return resolve(canvas);\n            };\n\n            iframeCanvas.onerror = reject;\n            iframeCanvas.src = canvas.toDataURL();\n\n            if (tempIframe.parentNode) {\n              tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);\n            }\n          });\n        });\n        return tempIframe;\n      }\n\n      if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {\n        var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {\n          try {\n            if (rule && rule.cssText) {\n              return css + rule.cssText;\n            }\n\n            return css;\n          } catch (err) {\n            _this3.logger.log('Unable to access cssText property', rule.name);\n\n            return css;\n          }\n        }, '');\n        var style = node.cloneNode(false);\n        style.textContent = css;\n        return style;\n      }\n\n      return node.cloneNode(false);\n    }\n  }, {\n    key: 'cloneNode',\n    value: function cloneNode(node) {\n      var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);\n      var window = node.ownerDocument.defaultView;\n      var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;\n      var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;\n      var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;\n\n      if (this.referenceElement === node && clone instanceof window.HTMLElement) {\n        this.clonedReferenceElement = clone;\n      }\n\n      if (clone instanceof window.HTMLBodyElement) {\n        createPseudoHideStyles(clone);\n      }\n\n      var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);\n      var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);\n\n      for (var child = node.firstChild; child; child = child.nextSibling) {\n        if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' && // $FlowFixMe\n        !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' || // $FlowFixMe\n        !this.options.ignoreElements(child))) {\n          if (!this.copyStyles || child.nodeName !== 'STYLE') {\n            clone.appendChild(this.cloneNode(child));\n          }\n        }\n      }\n\n      var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);\n      (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);\n\n      if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {\n        if (styleBefore) {\n          this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));\n        }\n\n        if (styleAfter) {\n          this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));\n        }\n\n        if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {\n          (0, _Util.copyCSSStyles)(style, clone);\n        }\n\n        this.inlineAllImages(clone);\n\n        if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n          this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n        }\n\n        switch (node.nodeName) {\n          case 'CANVAS':\n            if (!this.copyStyles) {\n              cloneCanvasContents(node, clone);\n            }\n\n            break;\n\n          case 'TEXTAREA':\n          case 'SELECT':\n            clone.value = node.value;\n            break;\n        }\n      }\n\n      return clone;\n    }\n  }]);\n\n  return DocumentCloner;\n}();\n\nvar getSheetFonts = function getSheetFonts(sheet, document) {\n  // $FlowFixMe\n  return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {\n    return rule.type === CSSRule.FONT_FACE_RULE;\n  }).map(function (rule) {\n    var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));\n    var formats = [];\n\n    for (var i = 0; i < src.length; i++) {\n      if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {\n        var a = document.createElement('a');\n        a.href = src[i].args[0];\n\n        if (document.body) {\n          document.body.appendChild(a);\n        }\n\n        var font = {\n          src: a.href,\n          format: src[i + 1].args[0]\n        };\n        formats.push(font);\n      }\n    }\n\n    return {\n      // TODO select correct format for browser),\n      formats: formats.filter(function (font) {\n        return /^woff/i.test(font.format);\n      }),\n      fontFace: rule.style\n    };\n  }).filter(function (font) {\n    return font.formats.length;\n  });\n};\n\nvar createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {\n  var doc = document.implementation.createHTMLDocument('');\n  var base = document.createElement('base'); // $FlowFixMe\n\n  base.href = baseHref;\n  var style = document.createElement('style');\n  style.textContent = text;\n\n  if (doc.head) {\n    doc.head.appendChild(base);\n  }\n\n  if (doc.body) {\n    doc.body.appendChild(style);\n  }\n\n  return style.sheet ? getSheetFonts(style.sheet, doc) : [];\n};\n\nvar restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {\n  if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n    ownerDocument.defaultView.scrollTo(x, y);\n  }\n};\n\nvar cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {\n  try {\n    if (clonedCanvas) {\n      clonedCanvas.width = canvas.width;\n      clonedCanvas.height = canvas.height;\n      var ctx = canvas.getContext('2d');\n      var clonedCtx = clonedCanvas.getContext('2d');\n\n      if (ctx) {\n        clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n      } else {\n        clonedCtx.drawImage(canvas, 0, 0);\n      }\n    }\n  } catch (e) {}\n};\n\nvar inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {\n  if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\n    return;\n  }\n\n  var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');\n  (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);\n\n  if (contentItems) {\n    var len = contentItems.length;\n\n    for (var i = 0; i < len; i++) {\n      var item = contentItems[i];\n\n      switch (item.type) {\n        case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:\n          var img = clone.ownerDocument.createElement('img');\n          img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];\n          img.style.opacity = '1';\n          anonymousReplacedElement.appendChild(img);\n          break;\n\n        case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:\n          anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));\n          break;\n      }\n    }\n  }\n\n  anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n  clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n  if (pseudoElt === PSEUDO_BEFORE) {\n    clone.insertBefore(anonymousReplacedElement, clone.firstChild);\n  } else {\n    clone.appendChild(anonymousReplacedElement);\n  }\n\n  return anonymousReplacedElement;\n};\n\nvar URL_REGEXP = /^url\\((.+)\\)$/i;\nvar PSEUDO_BEFORE = ':before';\nvar PSEUDO_AFTER = ':after';\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\nvar PSEUDO_HIDE_ELEMENT_STYLE = '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\n\nvar createPseudoHideStyles = function createPseudoHideStyles(body) {\n  createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\n};\n\nvar createStyles = function createStyles(body, styles) {\n  var style = body.ownerDocument.createElement('style');\n  style.innerHTML = styles;\n  body.appendChild(style);\n};\n\nvar initNode = function initNode(_ref) {\n  var _ref2 = _slicedToArray(_ref, 3),\n      element = _ref2[0],\n      x = _ref2[1],\n      y = _ref2[2];\n\n  element.scrollLeft = x;\n  element.scrollTop = y;\n};\n\nvar generateIframeKey = function generateIframeKey() {\n  return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);\n};\n\nvar DATA_URI_REGEXP = /^data:text\\/(.+);(base64)?,(.*)$/i;\n\nvar getIframeDocumentElement = function getIframeDocumentElement(node, options) {\n  try {\n    return Promise.resolve(node.contentWindow.document.documentElement);\n  } catch (e) {\n    return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {\n      var match = html.match(DATA_URI_REGEXP);\n\n      if (!match) {\n        return Promise.reject();\n      }\n\n      return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);\n    }).then(function (html) {\n      return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {\n        var cloneWindow = cloneIframeContainer.contentWindow;\n        var documentClone = cloneWindow.document;\n        documentClone.open();\n        documentClone.write(html);\n        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n          return documentClone.documentElement;\n        });\n        documentClone.close();\n        return iframeLoad;\n      });\n    }) : Promise.reject();\n  }\n};\n\nvar createIframeContainer = function createIframeContainer(ownerDocument, bounds) {\n  var cloneIframeContainer = ownerDocument.createElement('iframe');\n  cloneIframeContainer.className = 'html2canvas-container';\n  cloneIframeContainer.style.visibility = 'hidden';\n  cloneIframeContainer.style.position = 'fixed';\n  cloneIframeContainer.style.left = '-10000px';\n  cloneIframeContainer.style.top = '0px';\n  cloneIframeContainer.style.border = '0';\n  cloneIframeContainer.width = bounds.width.toString();\n  cloneIframeContainer.height = bounds.height.toString();\n  cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n\n  cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n\n  if (!ownerDocument.body) {\n    return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');\n  }\n\n  ownerDocument.body.appendChild(cloneIframeContainer);\n  return Promise.resolve(cloneIframeContainer);\n};\n\nvar iframeLoader = function iframeLoader(cloneIframeContainer) {\n  var cloneWindow = cloneIframeContainer.contentWindow;\n  var documentClone = cloneWindow.document;\n  return new Promise(function (resolve, reject) {\n    cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {\n      var interval = setInterval(function () {\n        if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n          clearInterval(interval);\n          resolve(cloneIframeContainer);\n        }\n      }, 50);\n    };\n  });\n};\n\nvar cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {\n  var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);\n  var scrollX = ownerDocument.defaultView.pageXOffset;\n  var scrollY = ownerDocument.defaultView.pageYOffset;\n  return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {\n    var cloneWindow = cloneIframeContainer.contentWindow;\n    var documentClone = cloneWindow.document;\n    /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n\n    var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n      cloner.scrolledElements.forEach(initNode);\n      cloneWindow.scrollTo(bounds.left, bounds.top);\n\n      if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {\n        documentClone.documentElement.style.top = -bounds.top + 'px';\n        documentClone.documentElement.style.left = -bounds.left + 'px';\n        documentClone.documentElement.style.position = 'absolute';\n      }\n\n      var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);\n      var onclone = options.onclone;\n      return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {\n        return onclone(documentClone);\n      }).then(function () {\n        return result;\n      }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');\n    });\n    documentClone.open();\n    documentClone.write(serializeDoctype(document.doctype) + '<html></html>'); // Chrome scrolls the parent document for some reason after the write to the cloned window???\n\n    restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);\n    documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);\n    documentClone.close();\n    return iframeLoad;\n  });\n};\n\nvar serializeDoctype = function serializeDoctype(doctype) {\n  var str = '';\n\n  if (doctype) {\n    str += '<!DOCTYPE ';\n\n    if (doctype.name) {\n      str += doctype.name;\n    }\n\n    if (doctype.internalSubset) {\n      str += doctype.internalSubset;\n    }\n\n    if (doctype.publicId) {\n      str += '\"' + doctype.publicId + '\"';\n    }\n\n    if (doctype.systemId) {\n      str += '\"' + doctype.systemId + '\"';\n    }\n\n    str += '>';\n  }\n\n  return str;\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","cloneWindow","DocumentCloner","undefined","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_Bounds","require","_Proxy","_ResourceLoader","_ResourceLoader2","_interopRequireDefault","_Util","_background","_CanvasRenderer","_CanvasRenderer2","_PseudoNodeContent","obj","__esModule","default","_classCallCheck","instance","IGNORE_ATTRIBUTE","element","options","logger","copyInline","renderer","referenceElement","scrolledElements","copyStyles","inlineImages","resourceLoader","window","pseudoContentData","counters","quoteDepth","documentElement","cloneNode","ownerDocument","inlineAllImages","node","_this","style","Promise","all","parseBackgroundImage","backgroundImage","map","method","inlineImage","args","then","img","src","catch","e","process","env","NODE_ENV","log","resolve","prefix","join","backgroundImages","backgroundColor","HTMLImageElement","parentNode","clonedChild","copyCSSStyles","replaceChild","inlineFonts","document","_this2","from","styleSheets","sheet","href","fetch","res","text","createStyleSheetFontsFromText","getSheetFonts","fonts","reduce","acc","font","concat","formats","response","blob","reject","reader","FileReader","onerror","onload","result","readAsDataURL","dataUri","fontFace","setProperty","cssText","fontCss","createElement","textContent","appendChild","createElementClone","_this3","HTMLCanvasElement","toDataURL","HTMLIFrameElement","tempIframe","iframeKey","generateIframeKey","setAttribute","_parseBounds","parseBounds","width","height","cache","getIframeDocumentElement","async","allowTaint","canvas","imageTimeout","logging","proxy","removeContainer","scale","foreignObjectRendering","useCORS","x","y","windowWidth","defaultView","innerWidth","windowHeight","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","child","iframeCanvas","getComputedStyle","HTMLStyleElement","cssRules","css","slice","call","rule","name","clone","nodeType","Node","TEXT_NODE","createTextNode","nodeValue","HTMLElement","styleBefore","styleAfter","clonedReferenceElement","HTMLBodyElement","createPseudoHideStyles","parseCounterReset","contentBefore","resolvePseudoContent","firstChild","nextSibling","ELEMENT_NODE","nodeName","hasAttribute","ignoreElements","contentAfter","popCounters","inlinePseudoElement","PSEUDO_BEFORE","PSEUDO_AFTER","scrollTop","scrollLeft","cloneCanvasContents","filter","type","CSSRule","FONT_FACE_RULE","getPropertyValue","a","body","format","test","baseHref","doc","implementation","createHTMLDocument","base","head","restoreOwnerScroll","scrollTo","clonedCanvas","ctx","getContext","clonedCtx","putImageData","getImageData","drawImage","contentItems","pseudoElt","content","display","anonymousReplacedElement","len","item","PSEUDO_CONTENT_ITEM_TYPE","IMAGE","opacity","TEXT","className","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","insertBefore","URL_REGEXP","PSEUDO_HIDE_ELEMENT_STYLE","createStyles","styles","innerHTML","initNode","_ref","_ref2","Math","ceil","Date","now","random","toString","DATA_URI_REGEXP","contentWindow","Proxy","html","match","atob","decodeURIComponent","createIframeContainer","cloneIframeContainer","documentClone","open","write","iframeLoad","iframeLoader","close","bounds","visibility","position","left","top","border","scrolling","onreadystatechange","interval","setInterval","childNodes","readyState","clearInterval","cloner","forEach","navigator","userAgent","onclone","serializeDoctype","doctype","adoptNode","str","internalSubset","publicId","systemId"],"sources":["/home/sony/Desktop/form/form/node_modules/react-to-pdf/node_modules/html2canvas/dist/npm/Clone.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.cloneWindow = exports.DocumentCloner = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bounds = require('./Bounds');\n\nvar _Proxy = require('./Proxy');\n\nvar _ResourceLoader = require('./ResourceLoader');\n\nvar _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);\n\nvar _Util = require('./Util');\n\nvar _background = require('./parsing/background');\n\nvar _CanvasRenderer = require('./renderer/CanvasRenderer');\n\nvar _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);\n\nvar _PseudoNodeContent = require('./PseudoNodeContent');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\n\nvar DocumentCloner = exports.DocumentCloner = function () {\n    function DocumentCloner(element, options, logger, copyInline, renderer) {\n        _classCallCheck(this, DocumentCloner);\n\n        this.referenceElement = element;\n        this.scrolledElements = [];\n        this.copyStyles = copyInline;\n        this.inlineImages = copyInline;\n        this.logger = logger;\n        this.options = options;\n        this.renderer = renderer;\n        this.resourceLoader = new _ResourceLoader2.default(options, logger, window);\n        this.pseudoContentData = {\n            counters: {},\n            quoteDepth: 0\n        };\n        // $FlowFixMe\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\n    }\n\n    _createClass(DocumentCloner, [{\n        key: 'inlineAllImages',\n        value: function inlineAllImages(node) {\n            var _this = this;\n\n            if (this.inlineImages && node) {\n                var style = node.style;\n                Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {\n                    if (backgroundImage.method === 'url') {\n                        return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {\n                            return img && typeof img.src === 'string' ? 'url(\"' + img.src + '\")' : 'none';\n                        }).catch(function (e) {\n                            if (process.env.NODE_ENV !== 'production') {\n                                _this.logger.log('Unable to load image', e);\n                            }\n                        });\n                    }\n                    return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');\n                })).then(function (backgroundImages) {\n                    if (backgroundImages.length > 1) {\n                        // TODO Multiple backgrounds somehow broken in Chrome\n                        style.backgroundColor = '';\n                    }\n                    style.backgroundImage = backgroundImages.join(',');\n                });\n\n                if (node instanceof HTMLImageElement) {\n                    this.resourceLoader.inlineImage(node.src).then(function (img) {\n                        if (img && node instanceof HTMLImageElement && node.parentNode) {\n                            var parentNode = node.parentNode;\n                            var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));\n                            parentNode.replaceChild(clonedChild, node);\n                        }\n                    }).catch(function (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            _this.logger.log('Unable to load image', e);\n                        }\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'inlineFonts',\n        value: function inlineFonts(document) {\n            var _this2 = this;\n\n            return Promise.all(Array.from(document.styleSheets).map(function (sheet) {\n                if (sheet.href) {\n                    return fetch(sheet.href).then(function (res) {\n                        return res.text();\n                    }).then(function (text) {\n                        return createStyleSheetFontsFromText(text, sheet.href);\n                    }).catch(function (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            _this2.logger.log('Unable to load stylesheet', e);\n                        }\n                        return [];\n                    });\n                }\n                return getSheetFonts(sheet, document);\n            })).then(function (fonts) {\n                return fonts.reduce(function (acc, font) {\n                    return acc.concat(font);\n                }, []);\n            }).then(function (fonts) {\n                return Promise.all(fonts.map(function (font) {\n                    return fetch(font.formats[0].src).then(function (response) {\n                        return response.blob();\n                    }).then(function (blob) {\n                        return new Promise(function (resolve, reject) {\n                            var reader = new FileReader();\n                            reader.onerror = reject;\n                            reader.onload = function () {\n                                // $FlowFixMe\n                                var result = reader.result;\n                                resolve(result);\n                            };\n                            reader.readAsDataURL(blob);\n                        });\n                    }).then(function (dataUri) {\n                        font.fontFace.setProperty('src', 'url(\"' + dataUri + '\")');\n                        return '@font-face {' + font.fontFace.cssText + ' ';\n                    });\n                }));\n            }).then(function (fontCss) {\n                var style = document.createElement('style');\n                style.textContent = fontCss.join('\\n');\n                _this2.documentElement.appendChild(style);\n            });\n        }\n    }, {\n        key: 'createElementClone',\n        value: function createElementClone(node) {\n            var _this3 = this;\n\n            if (this.copyStyles && node instanceof HTMLCanvasElement) {\n                var img = node.ownerDocument.createElement('img');\n                try {\n                    img.src = node.toDataURL();\n                    return img;\n                } catch (e) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        this.logger.log('Unable to clone canvas contents, canvas is tainted');\n                    }\n                }\n            }\n\n            if (node instanceof HTMLIFrameElement) {\n                var tempIframe = node.cloneNode(false);\n                var iframeKey = generateIframeKey();\n                tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\n\n                var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),\n                    width = _parseBounds.width,\n                    height = _parseBounds.height;\n\n                this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {\n                    return _this3.renderer(documentElement, {\n                        async: _this3.options.async,\n                        allowTaint: _this3.options.allowTaint,\n                        backgroundColor: '#ffffff',\n                        canvas: null,\n                        imageTimeout: _this3.options.imageTimeout,\n                        logging: _this3.options.logging,\n                        proxy: _this3.options.proxy,\n                        removeContainer: _this3.options.removeContainer,\n                        scale: _this3.options.scale,\n                        foreignObjectRendering: _this3.options.foreignObjectRendering,\n                        useCORS: _this3.options.useCORS,\n                        target: new _CanvasRenderer2.default(),\n                        width: width,\n                        height: height,\n                        x: 0,\n                        y: 0,\n                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\n                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\n                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\n                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset\n                    }, _this3.logger.child(iframeKey));\n                }).then(function (canvas) {\n                    return new Promise(function (resolve, reject) {\n                        var iframeCanvas = document.createElement('img');\n                        iframeCanvas.onload = function () {\n                            return resolve(canvas);\n                        };\n                        iframeCanvas.onerror = reject;\n                        iframeCanvas.src = canvas.toDataURL();\n                        if (tempIframe.parentNode) {\n                            tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);\n                        }\n                    });\n                });\n                return tempIframe;\n            }\n\n            if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {\n                var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {\n                    try {\n                        if (rule && rule.cssText) {\n                            return css + rule.cssText;\n                        }\n                        return css;\n                    } catch (err) {\n                        _this3.logger.log('Unable to access cssText property', rule.name);\n                        return css;\n                    }\n                }, '');\n                var style = node.cloneNode(false);\n                style.textContent = css;\n                return style;\n            }\n\n            return node.cloneNode(false);\n        }\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(node) {\n            var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);\n\n            var window = node.ownerDocument.defaultView;\n            var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;\n            var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;\n            var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;\n\n            if (this.referenceElement === node && clone instanceof window.HTMLElement) {\n                this.clonedReferenceElement = clone;\n            }\n\n            if (clone instanceof window.HTMLBodyElement) {\n                createPseudoHideStyles(clone);\n            }\n\n            var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);\n            var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);\n\n            for (var child = node.firstChild; child; child = child.nextSibling) {\n                if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&\n                // $FlowFixMe\n                !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||\n                // $FlowFixMe\n                !this.options.ignoreElements(child))) {\n                    if (!this.copyStyles || child.nodeName !== 'STYLE') {\n                        clone.appendChild(this.cloneNode(child));\n                    }\n                }\n            }\n\n            var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);\n            (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);\n\n            if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {\n                if (styleBefore) {\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));\n                }\n                if (styleAfter) {\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));\n                }\n                if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {\n                    (0, _Util.copyCSSStyles)(style, clone);\n                }\n                this.inlineAllImages(clone);\n                if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                    this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n                }\n                switch (node.nodeName) {\n                    case 'CANVAS':\n                        if (!this.copyStyles) {\n                            cloneCanvasContents(node, clone);\n                        }\n                        break;\n                    case 'TEXTAREA':\n                    case 'SELECT':\n                        clone.value = node.value;\n                        break;\n                }\n            }\n            return clone;\n        }\n    }]);\n\n    return DocumentCloner;\n}();\n\nvar getSheetFonts = function getSheetFonts(sheet, document) {\n    // $FlowFixMe\n    return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {\n        return rule.type === CSSRule.FONT_FACE_RULE;\n    }).map(function (rule) {\n        var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));\n        var formats = [];\n        for (var i = 0; i < src.length; i++) {\n            if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {\n                var a = document.createElement('a');\n                a.href = src[i].args[0];\n                if (document.body) {\n                    document.body.appendChild(a);\n                }\n\n                var font = {\n                    src: a.href,\n                    format: src[i + 1].args[0]\n                };\n                formats.push(font);\n            }\n        }\n\n        return {\n            // TODO select correct format for browser),\n\n            formats: formats.filter(function (font) {\n                return (/^woff/i.test(font.format)\n                );\n            }),\n            fontFace: rule.style\n        };\n    }).filter(function (font) {\n        return font.formats.length;\n    });\n};\n\nvar createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {\n    var doc = document.implementation.createHTMLDocument('');\n    var base = document.createElement('base');\n    // $FlowFixMe\n    base.href = baseHref;\n    var style = document.createElement('style');\n\n    style.textContent = text;\n    if (doc.head) {\n        doc.head.appendChild(base);\n    }\n    if (doc.body) {\n        doc.body.appendChild(style);\n    }\n\n    return style.sheet ? getSheetFonts(style.sheet, doc) : [];\n};\n\nvar restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\n\nvar cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            var ctx = canvas.getContext('2d');\n            var clonedCtx = clonedCanvas.getContext('2d');\n            if (ctx) {\n                clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n            } else {\n                clonedCtx.drawImage(canvas, 0, 0);\n            }\n        }\n    } catch (e) {}\n};\n\nvar inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {\n    if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\n        return;\n    }\n\n    var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');\n    (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);\n\n    if (contentItems) {\n        var len = contentItems.length;\n        for (var i = 0; i < len; i++) {\n            var item = contentItems[i];\n            switch (item.type) {\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:\n                    var img = clone.ownerDocument.createElement('img');\n                    img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];\n                    img.style.opacity = '1';\n                    anonymousReplacedElement.appendChild(img);\n                    break;\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:\n                    anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));\n                    break;\n            }\n        }\n    }\n\n    anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n    clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n    if (pseudoElt === PSEUDO_BEFORE) {\n        clone.insertBefore(anonymousReplacedElement, clone.firstChild);\n    } else {\n        clone.appendChild(anonymousReplacedElement);\n    }\n\n    return anonymousReplacedElement;\n};\n\nvar URL_REGEXP = /^url\\((.+)\\)$/i;\nvar PSEUDO_BEFORE = ':before';\nvar PSEUDO_AFTER = ':after';\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\n\nvar PSEUDO_HIDE_ELEMENT_STYLE = '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\n\nvar createPseudoHideStyles = function createPseudoHideStyles(body) {\n    createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\n};\n\nvar createStyles = function createStyles(body, styles) {\n    var style = body.ownerDocument.createElement('style');\n    style.innerHTML = styles;\n    body.appendChild(style);\n};\n\nvar initNode = function initNode(_ref) {\n    var _ref2 = _slicedToArray(_ref, 3),\n        element = _ref2[0],\n        x = _ref2[1],\n        y = _ref2[2];\n\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\n\nvar generateIframeKey = function generateIframeKey() {\n    return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);\n};\n\nvar DATA_URI_REGEXP = /^data:text\\/(.+);(base64)?,(.*)$/i;\n\nvar getIframeDocumentElement = function getIframeDocumentElement(node, options) {\n    try {\n        return Promise.resolve(node.contentWindow.document.documentElement);\n    } catch (e) {\n        return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {\n            var match = html.match(DATA_URI_REGEXP);\n            if (!match) {\n                return Promise.reject();\n            }\n\n            return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);\n        }).then(function (html) {\n            return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {\n                var cloneWindow = cloneIframeContainer.contentWindow;\n                var documentClone = cloneWindow.document;\n\n                documentClone.open();\n                documentClone.write(html);\n                var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n                    return documentClone.documentElement;\n                });\n\n                documentClone.close();\n                return iframeLoad;\n            });\n        }) : Promise.reject();\n    }\n};\n\nvar createIframeContainer = function createIframeContainer(ownerDocument, bounds) {\n    var cloneIframeContainer = ownerDocument.createElement('iframe');\n\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    if (!ownerDocument.body) {\n        return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');\n    }\n\n    ownerDocument.body.appendChild(cloneIframeContainer);\n\n    return Promise.resolve(cloneIframeContainer);\n};\n\nvar iframeLoader = function iframeLoader(cloneIframeContainer) {\n    var cloneWindow = cloneIframeContainer.contentWindow;\n    var documentClone = cloneWindow.document;\n\n    return new Promise(function (resolve, reject) {\n        cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {\n            var interval = setInterval(function () {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(cloneIframeContainer);\n                }\n            }, 50);\n        };\n    });\n};\n\nvar cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {\n    var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);\n    var scrollX = ownerDocument.defaultView.pageXOffset;\n    var scrollY = ownerDocument.defaultView.pageYOffset;\n\n    return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {\n        var cloneWindow = cloneIframeContainer.contentWindow;\n        var documentClone = cloneWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n             if window url is about:blank, we can assign the url to current by writing onto the document\n             */\n\n        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n            cloner.scrolledElements.forEach(initNode);\n            cloneWindow.scrollTo(bounds.left, bounds.top);\n            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {\n                documentClone.documentElement.style.top = -bounds.top + 'px';\n                documentClone.documentElement.style.left = -bounds.left + 'px';\n                documentClone.documentElement.style.position = 'absolute';\n            }\n\n            var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);\n\n            var onclone = options.onclone;\n\n            return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {\n                return onclone(documentClone);\n            }).then(function () {\n                return result;\n            }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');\n        });\n\n        documentClone.open();\n        documentClone.write(serializeDoctype(document.doctype) + '<html></html>');\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);\n        documentClone.close();\n\n        return iframeLoad;\n    });\n};\n\nvar serializeDoctype = function serializeDoctype(doctype) {\n    var str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n\n        if (doctype.publicId) {\n            str += '\"' + doctype.publicId + '\"';\n        }\n\n        if (doctype.systemId) {\n            str += '\"' + doctype.systemId + '\"';\n        }\n\n        str += '>';\n    }\n\n    return str;\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}